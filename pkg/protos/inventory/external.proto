// This file contains the definitions used by configuration and external
// commands for describing the simulated inventory

syntax = "proto3";

import "github.com/Jim3Things/CloudChamber/pkg/protos/common/capacity.proto";

package inventory;

option go_package="github.com/Jim3Things/CloudChamber/pkg/protos/inventory";

message external {

    // The three types here are common overhead items in a rack.  All are pure skeletons at this point.
    // Note that all have implied connectivity with all other items in a rack.  Currently elided
    // in the external model, but used in the other models.

    // Power distribution unit.  Network accessible power controller
    message pdu {
        // Note that full internal name for a pdu is <rackname>-pdu-0
    }

    // Rack-level network switch.
    message tor {
        // Note that full internal name for a tor is <rackname>-tor-0
    }

    // Management controller.  Provides direct ability halt or boot a specific
    // blade.
    message mc {
        // Note that full internal name for a sc is <rackname>-mc-0
    }

    message rack {
        string name = 1;

        // This assumes a single overhead item per rack.  May want to allow multiple to handle
        // subdivisions for power or network, say.

        pdu pdu = 2;
        tor tor = 3;
        mc mc = 4;

        // specify the blades in the rack.  Note that full internal name for a blade is <rackname>-blade-<bladeId>,
        // where <bladeId> is the key in that blade's map entry below.
        map<int64, common.blade_capacity> blades = 5;
    }

    // This is probably not needed at this point.
    message zone {
        repeated rack racks = 1;
    }
}